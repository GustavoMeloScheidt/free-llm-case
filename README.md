# LLM CSAT Case – Customer Feedback Analysis

This project was developed as part of an internship selection case.  
It analyzes **customer satisfaction verbatims (CSAT)** and automatically groups them into **semantic clusters** using **TF-IDF + KMeans**, followed by an **LLM-based summarization** for interpretation of each cluster.

---

## Objective

Given a database of customer comments stored in a SQLite file (`db.sqlite`), the goal is to:
1. Extract and explore the textual data (verbatims);
2. Group similar comments into **themes** automatically;
3. Use a **Language Model (LLM)** to generate concise summaries and suggested actions for each cluster;
4. Visualize and interpret the main insights to identify improvement opportunities.

---

## Project Structure

```
free-llm-csat-case/
├── data/
│   ├── db.sqlite                  # raw database
│   ├── csat.csv                   # exported table from SQLite
│   ├── csat_with_clusters.csv     # clustered comments
│   └── cluster_summaries.csv      # LLM summaries per cluster
│
├── src/
│   ├── extract_sqlite.py          # export from SQLite → CSV
│   ├── baseline_topics.py         # TF-IDF + KMeans clustering
│   └── llm_labeling.py            # automatic labeling & summarization using LLM
│
├── notebooks/
│   ├── 01_eda.ipynb               # data exploration
│   └── 02_visualization.ipynb     # visualization of clusters
│
├── reports/
│   └── Report.docx                # short analytical report 
│
├── requirements.txt
└── README.md
```

Note: in order to preserve Free's database, it was not included in this project, feel free to include any database of your choice.

---

## Installation & Setup

### 1. Create a virtual environment
```bash
#Feel free to use conda as well
python -m venv .venv
source .venv/bin/activate       # (Mac/Linux)
# or
.venv\Scripts\activate        # (Windows)
```

### 2. Install dependencies
```bash
pip install -r requirements.txt
```
#### Note: This requirements.txt may have unecessary libraries, as I also used it for other personal ML projects.
### 3. Place your SQLite database
Copy the file `db.sqlite` (or any of your choice) into the `data/` folder.

---

## Usage

### Step 1 – Extract data from SQLite
Exports the main table (`csat_extract`) to a CSV file.

```bash
python src/extract_sqlite.py
```
Output: `data/csat.csv`

---

### Step 2 – Create automatic topic clusters
Groups comments using **TF-IDF + KMeans**.

```bash
python src/baseline_topics.py --k 10
```
Output: `data/csat_with_clusters.csv`

Each cluster represents a recurring theme among customers  
(e.g., *technician delay*, *billing issue*, *network outage*, etc.).

---

### Step 3 – Generate LLM summaries (optional)
Uses a Language Model (in our case GPT-4) to name and summarize clusters.
Change line 21 in the llm_labeling.py file for your OpenAI key. 
```bash

python src/llm_labeling.py

openai.api_key =  "insert_here"  

```
Output: `data/cluster_summaries.csv`  
Each row contains: cluster id, number of comments, and a short summary.

---

### Step 4 – Visualize results
Open the notebook:

```bash
jupyter notebook notebooks/02_visualization.ipynb
```

This displays:
- Mean CSAT score per cluster  
- Top negative clusters  
- Summaries generated by the LLM

---

## Example Outputs

- **Cluster 3:**  
  *Top terms:* `technicien`, `rendez-vous`, `attente`, `retard`  
  *LLM summary:* “Delays with technician appointments”  
  *Suggested action:* Improve scheduling communication.

- **Cluster 6:**  
  *Top terms:* `facture`, `remboursement`, `paiement`  
  *LLM summary:* “Billing and refund issues”  
  *Suggested action:* Clarify refund process and delays.

---

## Methodology Summary

1. **Data extraction:** from SQLite into CSV.  
2. **Vectorization:** TF-IDF bi-grams capturing frequent word patterns.  
3. **Clustering:** KMeans groups semantically similar comments.  
4. **LLM summarization:** titles and bullet summaries per cluster.  
5. **Visualization:** mean CSAT per cluster and actionable insights.

---

## Technical Summary:

- **TF-IDF** transforms free text into numerical vectors, emphasizing distinctive terms.  
- **KMeans** finds dense semantic regions representing main complaint themes.  
- **LLMs** summarize clusters into human-readable insights, bridging analytics and business understanding.


---
## Author
Developed by **Gustavo Scheidt** as part of a data/LLM case study project.  
Institut Polytechnique de Paris, 2025.
